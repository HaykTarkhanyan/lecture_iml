\aufgabe{Permutation feature importance}{
\label{ex:pfi}
	
Permutation Feature Importance is one of the oldest and most widely used IML techniques.
It is defined as 
%
$$\widehat{PFI}_S = \tfrac{1}{m} \textstyle\sum\nolimits_{k = 1}^{m} \riske (\fh, \pert{\D}{S}{}_{(k)}) - \riske (\fh, \D)$$
%
where $\pert{\D}{S}{}_{(k)}$ is the dataset where features $S$ were replaced with a perturbed version that preserves the variables marginal distribution $P(X_S)$. We can approximate sampling from the marginal distribution by random permutation of the original feature's observations.

\begin{enumerate}
    \item PFI has been criticized to evaluate the model on unrealistic observations. Describe in a few words why this extrapolation happens.
    \item Under a (seldomly realistic) assumption PFI does not extrapolate to unseen regions. What is that assumption? Briefly explain why.
    \item Download the \texttt{extrapolation.csv} dataset. Fit an unregularized ordinary least squares linear regression model without interactions to the data. Do not look at the model's coefficients or perform an exploratory analysis of the data yet.
    \item Implement Permutation Feature Importance. Apply Permutation Feature Importance to the model (on test data) and plot the results
    \item Interpret the PFI result. What insight into model and data do we gain?
    \item Perform an exploratory analysis of the data (correlation structure between features and with $y$) and print the model's coefficient and intercept. Compare your PFI interpretation with the ground truth.
    \item What additional insight into the relationship of the features with $y$ do we gain by looking at the correlation structure of the covariates in addition to the PFI (assuming that all dependencies are linear)?
    \item Demonstrate the extrapolation problem empirically, e.g. on the \texttt{extrapolation.csv} dataset or a real-world dataset of your choice. \textit{Hint:} Since all dependencies are assumed to be pairwise, you can do pairwise scatterplots before and after perturbing the features of interest.
\end{enumerate}

}
